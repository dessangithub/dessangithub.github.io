var yt=Object.defineProperty;var $t=(e,t,n)=>t in e?yt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var et=(e,t,n)=>($t(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function k(){}function ht(e){return e()}function at(){return Object.create(null)}function D(e){e.forEach(ht)}function bt(e){return typeof e=="function"}function F(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function kt(e){return Object.keys(e).length===0}function Ot(e,...t){if(e==null)return k;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Ct(e,t,n){e.$$.on_destroy.push(Ot(t,n))}function w(e,t){e.appendChild(t)}function $(e,t,n){e.insertBefore(t,n||null)}function y(e){e.parentNode&&e.parentNode.removeChild(e)}function Et(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function p(e){return document.createElement(e)}function W(e){return document.createTextNode(e)}function x(){return W(" ")}function Lt(){return W("")}function j(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function f(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Mt(e){return Array.from(e.childNodes)}function ut(e,t){t=""+t,e.data!==t&&(e.data=t)}function S(e,t){e.value=t??""}function St(e,t,n,s){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,s?"important":"")}function jt(e,t,{bubbles:n=!1,cancelable:s=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(e,n,s,t),o}let U;function R(e){U=e}function mt(){if(!U)throw new Error("Function called outside component initialization");return U}function gt(e){mt().$$.on_mount.push(e)}function ct(){const e=mt();return(t,n,{cancelable:s=!1}={})=>{const o=e.$$.callbacks[t];if(o){const l=jt(t,n,{cancelable:s});return o.slice().forEach(r=>{r.call(e,l)}),!l.defaultPrevented}return!0}}const A=[],L=[];let B=[];const ot=[],_t=Promise.resolve();let lt=!1;function vt(){lt||(lt=!0,_t.then(xt))}function nt(){return vt(),_t}function rt(e){B.push(e)}function Nt(e){ot.push(e)}const st=new Set;let I=0;function xt(){if(I!==0)return;const e=U;do{try{for(;I<A.length;){const t=A[I];I++,R(t),Pt(t.$$)}}catch(t){throw A.length=0,I=0,t}for(R(null),A.length=0,I=0;L.length;)L.pop()();for(let t=0;t<B.length;t+=1){const n=B[t];st.has(n)||(st.add(n),n())}B.length=0}while(A.length);for(;ot.length;)ot.pop()();lt=!1,st.clear(),R(e)}function Pt(e){if(e.fragment!==null){e.update(),D(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(rt)}}function Tt(e){const t=[],n=[];B.forEach(s=>e.indexOf(s)===-1?t.push(s):n.push(s)),n.forEach(s=>s()),B=t}const Y=new Set;let P;function Dt(){P={r:0,c:[],p:P}}function Ht(){P.r||D(P.c),P=P.p}function T(e,t){e&&e.i&&(Y.delete(e),e.i(t))}function z(e,t,n,s){if(e&&e.o){if(Y.has(e))return;Y.add(e),P.c.push(()=>{Y.delete(e),s&&(n&&e.d(1),s())}),e.o(t)}else s&&s()}function It(e,t,n){const s=e.$$.props[t];s!==void 0&&(e.$$.bound[s]=n,n(e.$$.ctx[s]))}function tt(e){e&&e.c()}function G(e,t,n,s){const{fragment:o,after_update:l}=e.$$;o&&o.m(t,n),s||rt(()=>{const r=e.$$.on_mount.map(ht).filter(bt);e.$$.on_destroy?e.$$.on_destroy.push(...r):D(r),e.$$.on_mount=[]}),l.forEach(rt)}function V(e,t){const n=e.$$;n.fragment!==null&&(Tt(n.after_update),D(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function qt(e,t){e.$$.dirty[0]===-1&&(A.push(e),vt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Q(e,t,n,s,o,l,r,c=[-1]){const i=U;R(e);const u=e.$$={fragment:null,ctx:[],props:l,update:k,not_equal:o,bound:at(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(i?i.$$.context:[])),callbacks:at(),dirty:c,skip_bound:!1,root:t.target||i.$$.root};r&&r(u.root);let d=!1;if(u.ctx=n?n(e,t.props||{},(h,a,...v)=>{const b=v.length?v[0]:a;return u.ctx&&o(u.ctx[h],u.ctx[h]=b)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](b),d&&qt(e,h)),a}):[],u.update(),d=!0,D(u.before_update),u.fragment=s?s(u.ctx):!1,t.target){if(t.hydrate){const h=Mt(t.target);u.fragment&&u.fragment.l(h),h.forEach(y)}else u.fragment&&u.fragment.c();t.intro&&T(e.$$.fragment),G(e,t.target,t.anchor,t.customElement),xt()}R(i)}class X{$destroy(){V(this,1),this.$destroy=k}$on(t,n){if(!bt(n))return k;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(n),()=>{const o=s.indexOf(n);o!==-1&&s.splice(o,1)}}$set(t){this.$$set&&!kt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const q=[];function ft(e,t=k){let n;const s=new Set;function o(c){if(F(e,c)&&(e=c,n)){const i=!q.length;for(const u of s)u[1](),q.push(u,e);if(i){for(let u=0;u<q.length;u+=2)q[u][0](q[u+1]);q.length=0}}}function l(c){o(c(e))}function r(c,i=k){const u=[c,i];return s.add(u),s.size===1&&(n=t(o)||k),c(e),()=>{s.delete(u),s.size===0&&n&&(n(),n=null)}}return{set:o,update:l,subscribe:r}}let K=ft(0),Z=ft([]),it=ft({});function dt(e){let t,n;return{c(){t=p("div"),n=W(e[0]),f(t,"class","tw-bg-red-600 tw-p-1 tw-px-2 tw-rounded-full tw-place-items-center tw-text-xs tw-font-semibold tw-text-white tw-absolute tw-top-0 tw-right-0")},m(s,o){$(s,t,o),w(t,n),e[5](t)},p(s,o){o&1&&ut(n,s[0])},d(s){s&&y(t),e[5](null)}}}function At(e){let t,n,s,o,l,r,c,i,u=e[0]&&dt(e);return{c(){t=p("div"),n=p("div"),u&&u.c(),s=x(),o=p("div"),o.innerHTML='<img alt="bubble_icon" src="/static/images/bubbleicon.svg"/>',l=x(),r=p("div"),r.textContent="ok",f(o,"class","bubbleicon svelte-1k4k3rq"),f(o,"style",""),f(n,"class","bubble tw-grid tw-grid-cols-5 tw-gap-3 tw-bg-slate-200 tw-p-4 tw-rounded-full tw-place-items-center svelte-1k4k3rq"),f(t,"class","tw-max-w-sm tw-flex tw-flex-col tw-flex-auto tw-h-full tw-p-6"),f(r,"class","buuubble icon svelte-1k4k3rq")},m(d,h){$(d,t,h),w(t,n),u&&u.m(n,null),w(n,s),w(n,o),e[6](o),e[7](n),$(d,l,h),$(d,r,h),c||(i=j(n,"click",e[4]),c=!0)},p(d,[h]){d[0]?u?u.p(d,h):(u=dt(d),u.c(),u.m(n,s)):u&&(u.d(1),u=null)},i:k,o:k,d(d){d&&y(t),u&&u.d(),e[6](null),e[7](null),d&&y(l),d&&y(r),c=!1,i()}}}function Bt(e,t,n){let s;K.subscribe(a=>{n(0,s=a)});const o=ct();let l,r,c,i=()=>{["icon"].map(a=>c.classList.toggle(a)),r&&["icon"].map(a=>r.classList.toggle(a)),["buuubble"].map(a=>l.classList.toggle(a)),setTimeout(()=>{["tw-rounded-full","tw-rounded-t-2xl"].map(a=>l.classList.toggle(a))},200),o("bubbling")};function u(a){L[a?"unshift":"push"](()=>{r=a,n(2,r)})}function d(a){L[a?"unshift":"push"](()=>{c=a,n(3,c)})}function h(a){L[a?"unshift":"push"](()=>{l=a,n(1,l)})}return[s,l,r,c,i,u,d,h]}class zt extends X{constructor(t){super(),Q(this,t,Bt,At,F,{})}}function wt(e,t,n){const s=e.slice();return s[4]=t[n],s}function Ft(e){let t,n,s,o,l,r,c=e[4].body+"",i,u;return{c(){t=p("div"),n=p("div"),s=p("div"),s.textContent="G",o=x(),l=p("div"),r=p("div"),i=W(c),u=x(),f(s,"class","tw-flex tw-items-center tw-justify-center tw-h-10 tw-w-10 tw-rounded-full tw-bg-indigo-500 tw-flex-shrink-0"),f(l,"class","tw-relative tw-mr-3 tw-text-sm tw-bg-indigo-100 tw-py-2 tw-px-4 tw-shadow tw-rounded-xl"),f(n,"class","tw-flex tw-items-center tw-justify-start tw-flex-row-reverse"),f(t,"class","tw-col-start-1 tw-col-end-13 tw-p-3 tw-rounded-lg"),f(t,"tw-transition:fade","")},m(d,h){$(d,t,h),w(t,n),w(n,s),w(n,o),w(n,l),w(l,r),w(r,i),w(t,u)},p(d,h){h&2&&c!==(c=d[4].body+"")&&ut(i,c)},d(d){d&&y(t)}}}function Jt(e){let t,n,s,o,l,r,c=e[4].body+"",i,u;return{c(){t=p("div"),n=p("div"),s=p("div"),s.textContent="S",o=x(),l=p("div"),r=p("div"),i=W(c),u=x(),f(s,"class","tw-flex tw-items-center tw-justify-center tw-h-10 tw-w-10 tw-rounded-full tw-bg-indigo-500 tw-flex-shrink-0"),f(l,"class","tw-relative tw-ml-3 tw-text-sm tw-bg-white tw-py-2 tw-px-4 tw-shadow tw-rounded-xl"),f(n,"class","tw-flex tw-flex-row tw-items-center"),f(t,"class","tw-col-start-1 tw-col-end-13 tw-p-3 tw-rounded-lg"),f(t,"tw-transition:fade","")},m(d,h){$(d,t,h),w(t,n),w(n,s),w(n,o),w(n,l),w(l,r),w(r,i),w(t,u)},p(d,h){h&2&&c!==(c=d[4].body+"")&&ut(i,c)},d(d){d&&y(t)}}}function pt(e){let t;function n(l,r){return l[4].author==="0"?Jt:Ft}let s=n(e),o=s(e);return{c(){o.c(),t=Lt()},m(l,r){o.m(l,r),$(l,t,r)},p(l,r){s===(s=n(l))&&o?o.p(l,r):(o.d(1),o=s(l),o&&(o.c(),o.m(t.parentNode,t)))},d(l){o.d(l),l&&y(t)}}}function Kt(e){let t,n,s,o=e[1],l=[];for(let r=0;r<o.length;r+=1)l[r]=pt(wt(e,o,r));return{c(){t=p("div"),n=p("div"),s=p("div");for(let r=0;r<l.length;r+=1)l[r].c();f(s,"class","tw-grid tw-grid-cols-12 tw-gap-y-2"),f(n,"class","tw-flex tw-flex-col tw-overflow-y-auto tw-max-h-80"),f(t,"class","tw-flex tw-flex-col tw-h-full tw-overflow-x-auto")},m(r,c){$(r,t,c),w(t,n),w(n,s);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,null);e[3](n)},p(r,[c]){if(c&2){o=r[1];let i;for(i=0;i<o.length;i+=1){const u=wt(r,o,i);l[i]?l[i].p(u,c):(l[i]=pt(u),l[i].c(),l[i].m(s,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=o.length}},i:k,o:k,d(r){r&&y(t),Et(l,r),e[3](null)}}}function Rt(e,t,n){let s;Ct(e,Z,c=>n(1,s=c));let o;function l(){o.scrollTo({top:o.scrollHeight,behavior:"smooth"})}gt(async()=>{l()});function r(c){L[c?"unshift":"push"](()=>{o=c,n(0,o)})}return[o,s,l,r]}class Ut extends X{constructor(t){super(),Q(this,t,Rt,Kt,F,{scrollDown:2})}get scrollDown(){return this.$$.ctx[2]}}function Gt(e){let t,n,s,o,l,r,c,i,u,d,h,a,v,b,g,C,M,_,E,H;return{c(){t=p("div"),n=p("div"),s=p("div"),o=p("div"),l=p("form"),r=p("p"),r.textContent="Please fill in your name/email:",c=x(),i=p("div"),u=p("input"),d=x(),h=p("div"),a=p("input"),v=x(),b=p("div"),g=p("input"),C=x(),M=p("div"),_=p("button"),_.textContent="open chat",f(r,"class","tw-mb-4"),f(u,"type","text"),f(u,"class","form-control tw-block tw-w-full tw-px-3 tw-py-1.5 tw-text-base tw-font-normal tw-text-gray-700 tw-bg-white tw-bg-clip-padding tw-border tw-border-solid tw-border-gray-300 tw-rounded tw-transition tw-ease-in-out tw-m-0 focus:tw-text-gray-700 focus:tw-bg-white focus:tw-border-blue-600 focus:tw-outline-none"),f(u,"id","exampleFormControlInput1"),f(u,"placeholder","name"),f(i,"class","tw-mb-4"),f(a,"type","text"),f(a,"class","form-control tw-block tw-w-full tw-px-3 tw-py-1.5 tw-text-base tw-font-normal tw-text-gray-700 tw-bg-white tw-bg-clip-padding tw-border tw-border-solid tw-border-gray-300 tw-rounded tw-transition tw-ease-in-out tw-m-0 focus:tw-text-gray-700 focus:tw-bg-white focus:tw-border-blue-600 focus:tw-outline-none"),f(a,"id","exampleFormControlInput1"),f(a,"placeholder","surname"),f(h,"class","tw-mb-4"),f(g,"type","text"),f(g,"class","form-control tw-block tw-w-full tw-px-3 tw-py-1.5 tw-text-base tw-font-normal tw-text-gray-700 tw-bg-white tw-bg-clip-padding tw-border tw-border-solid tw-border-gray-300 tw-rounded tw-transition tw-ease-in-out tw-m-0 focus:tw-text-gray-700 focus:tw-bg-white focus:tw-border-blue-600 focus:tw-outline-none"),f(g,"id","exampleFormControlInput1"),f(g,"placeholder","email"),f(b,"class","tw-mb-4"),f(_,"class","tw-inline-block tw-px-6 tw-py-2.5 tw-text-white tw-font-medium tw-text-xs tw-leading-tight tw-uppercase tw-rounded tw-shadow-md hover:tw-bg-blue-700 hover:tw-shadow-lg focus:tw-shadow-lg focus:tw-outline-none focus:tw-ring-0 active:tw-shadow-lg tw-transition tw-duration-150 tw-ease-in-out tw-w-full tw-mb-3"),f(_,"type","button"),f(_,"data-mdb-ripple","true"),f(_,"data-mdb-ripple-color","light"),St(_,"background","linear-gradient( to right, #ee7724, #d8363a, #dd3675, #b44593 )"),f(M,"class","tw-text-center tw-pt-1 tw-mb-12 tw-pb-1"),f(o,"class","md:tw-p-5 md:tw-mx-5"),f(s,"class","lg:tw-w-full 2 tw-px-0 md:tw-px-0"),f(n,"class","lg:tw-flex lg:tw-flex-wrap g-0"),f(t,"class","tw-flex tw-flex-col tw-h-full tw-overflow-x-auto")},m(O,N){$(O,t,N),w(t,n),w(n,s),w(s,o),w(o,l),w(l,r),w(l,c),w(l,i),w(i,u),S(u,e[0].name),w(l,d),w(l,h),w(h,a),S(a,e[0].surname),w(l,v),w(l,b),w(b,g),S(g,e[0].email),w(l,C),w(l,M),w(M,_),E||(H=[j(u,"input",e[2]),j(a,"input",e[3]),j(g,"input",e[4]),j(_,"click",e[1])],E=!0)},p(O,[N]){N&1&&u.value!==O[0].name&&S(u,O[0].name),N&1&&a.value!==O[0].surname&&S(a,O[0].surname),N&1&&g.value!==O[0].email&&S(g,O[0].email)},i:k,o:k,d(O){O&&y(t),E=!1,D(H)}}}function Vt(e,t,n){let s;it.subscribe(d=>{s=d});const o={name:"",surname:"",email:""},l=ct();let r=async d=>{const h=Object.keys(o).map(a=>encodeURIComponent(a)+"="+encodeURIComponent(o[a])).join("&");fetch(`${s.config.server.proto}://${s.config.server.host}:${s.config.server.port}/session`,{method:"POST",mode:"no-cors",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:h}).then(a=>{if(a.status===0)l("sessiondone");else throw new Error("Network response was not OK")}).catch(a=>console.log(a))};function c(){o.name=this.value,n(0,o)}function i(){o.surname=this.value,n(0,o)}function u(){o.email=this.value,n(0,o)}return[o,r,c,i,u]}class Wt extends X{constructor(t){super(),Q(this,t,Vt,Gt,F,{})}}class Qt{constructor(t){et(this,"ws");et(this,"store");this.store=t.store,this.onmessage=t.onmessage,this.onopen=t.onopen,this.ws=new WebSocket(t.url),this.ws.onopen=n=>this.onOpen(n),this.ws.onmessage=n=>this.onMessage(n),this.ws.onerror=n=>this.onError(n),this.ws.onclose=n=>this.onClose(n)}onOpen(t){if(this.onopen)for(let n of this.onopen)n()}onMessage(t,n){const s=n||this.store,o=JSON.parse(t.data);if(s.update(l=>[...l,o]),this.onmessage)for(let l of this.onmessage)l()}onError(t){}onClose(t){}sendData(t){this.ws.send(t)}}function Xt(e){let t,n,s,o,l,r,c,i,u,d,h,a,v,b,g,C,M={};return t=new Ut({props:M}),e[8](t),{c(){tt(t.$$.fragment),n=x(),s=p("div"),o=p("div"),l=x(),r=p("div"),c=p("div"),i=p("input"),u=x(),d=p("button"),d.innerHTML='<svg class="tw-w-6 tw-h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',h=x(),a=p("div"),v=p("button"),v.innerHTML='<span class="tw-p-5px"><svg class="tw-w-4 tw-h-4 tw-transform tw-rotate-45 tw--mt-px" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg></span>',f(i,"type","text"),f(i,"class","tw-flex tw-w-full tw-border tw-rounded-xl focus:tw-outline-none focus:tw-border-indigo-300 tw-pl-4 tw-pr-10 tw-h-10"),f(d,"class","tw-absolute tw-flex tw-items-center tw-justify-center tw-h-full tw-w-12 tw-right-0 tw-top-0 tw-text-gray-400 hover:tw-text-gray-600"),f(c,"class","tw-relative tw-w-full"),f(r,"class","tw-flex-grow"),f(v,"class","tw-flex tw-items-center tw-justify-center tw-bg-indigo-500 hover:tw-bg-indigo-600 tw-rounded-xl tw-text-white tw-px-4 tw-py-1 tw-flex-shrink-0"),f(a,"class","tw-ml-4"),f(s,"class","tw-flex tw-flex-row tw-items-center tw-h-16 tw-rounded-xl tw-bg-white tw-w-full tw-px-4")},m(_,E){G(t,_,E),$(_,n,E),$(_,s,E),w(s,o),w(s,l),w(s,r),w(r,c),w(c,i),S(i,e[2]),w(c,u),w(c,d),w(s,h),w(s,a),w(a,v),b=!0,g||(C=[j(i,"input",e[9]),j(i,"keydown",e[10]),j(v,"click",e[11])],g=!0)},p(_,E){const H={};t.$set(H),E&4&&i.value!==_[2]&&S(i,_[2])},i(_){b||(T(t.$$.fragment,_),b=!0)},o(_){z(t.$$.fragment,_),b=!1},d(_){e[8](null),V(t,_),_&&y(n),_&&y(s),g=!1,D(C)}}}function Yt(e){let t,n;return t=new Wt({}),t.$on("sessiondone",e[7]),{c(){tt(t.$$.fragment)},m(s,o){G(t,s,o),n=!0},p:k,i(s){n||(T(t.$$.fragment,s),n=!0)},o(s){z(t.$$.fragment,s),n=!1},d(s){V(t,s)}}}function Zt(e){let t,n,s,o,l,r,c,i,u,d;const h=[Yt,Xt],a=[];function v(b,g){return b[3]?1:0}return r=v(e),c=a[r]=h[r](e),{c(){t=p("div"),n=p("div"),s=p("div"),s.innerHTML=`<div class="">...</div> 
        <div class="tw-col-start-2 tw-col-span-3 ">chat with me</div> 
        <div class="">x</div>`,o=x(),l=p("div"),c.c(),i=x(),u=p("div"),f(s,"class","tw-grid tw-grid-cols-5 tw-gap-3 tw-bg-slate-200 tw-p-4 tw-rounded-t-2xl tw-place-items-center"),f(l,"class","tw-flex tw-flex-col tw-flex-auto tw-flex-shrink-0 tw-rounded-b-2xl tw-bg-gray-100 tw-h-full tw-px-4 tw-pb-4"),f(n,"class","tw-max-w-sm tw-flex tw-flex-col tw-flex-auto tw-h-full tw-p-6 chatHidden svelte-1ybb335"),f(t,"class","tw-fixed msgbox svelte-1ybb335"),f(u,"class","grow svelte-1ybb335")},m(b,g){$(b,t,g),w(t,n),w(n,s),w(n,o),w(n,l),a[r].m(l,null),e[12](n),$(b,i,g),$(b,u,g),d=!0},p(b,[g]){let C=r;r=v(b),r===C?a[r].p(b,g):(Dt(),z(a[C],1,1,()=>{a[C]=null}),Ht(),c=a[r],c?c.p(b,g):(c=a[r]=h[r](b),c.c()),T(c,1),c.m(l,null))},i(b){d||(T(c),d=!0)},o(b){z(c),d=!1},d(b){b&&y(t),a[r].d(),e[12](null),b&&y(i),b&&y(u)}}}function te(e,t,n){let{chatboxOpen:s}=t;const o=ct();let l,r,c,i="",u,d;K.subscribe(m=>{}),it.subscribe(m=>{l=m});let h=async()=>{await nt().then(()=>{s?K.set(0):K.update(m=>m+1)})},a=async()=>{console.log("wjat...");let m=JSON.stringify({author:"0",body:l.greetings});Z.update(J=>[...J,JSON.parse(m)])},v=async()=>{await nt().then(c.scrollDown)},b=()=>{d&&!r?r=new Qt({url:`${l.config.websocket.proto}://${l.config.websocket.host}:${l.config.websocket.port}/entry`,store:Z,onopen:[a],onmessage:[v,h]}):console.log("Socket either connected or no session yet")};const g=async()=>{if(i==="")return;let m=JSON.stringify({author:"1",body:i});Z.update(J=>[...J,JSON.parse(m)]),r.sendData(m),await nt().then(v),o("newmessage"),n(2,i="")};let C=m=>{m!=null&&(s?(m.classList.add("grow"),m.classList.remove("chatHidden"),K.set(0)):(m.classList.remove("grow"),m.classList.add("chatHidden")),o("togglechat",{variable:"empty"}))};gt(async()=>{n(3,d=document.cookie.match(/^(.*;)?\s*session_id\s*=\s*[^;]+(.*)?$/)),await fetch("/static/config.json").then(m=>{m.json().then(J=>{it.set(J),b()})})});const M=()=>n(3,d=!d)&&b();function _(m){L[m?"unshift":"push"](()=>{c=m,n(1,c)})}function E(){i=this.value,n(2,i)}const H=m=>m.key==="Enter"&&g(),O=()=>i!==""&&g();function N(m){L[m?"unshift":"push"](()=>{u=m,n(0,u)})}return e.$$set=m=>{"chatboxOpen"in m&&n(6,s=m.chatboxOpen)},e.$$.update=()=>{e.$$.dirty&65&&C(u)},[u,c,i,d,b,g,s,M,_,E,H,O,N]}class ee extends X{constructor(t){super(),Q(this,t,te,Zt,F,{chatboxOpen:6})}}function ne(e){let t,n,s,o,l;t=new zt({}),t.$on("bubbling",e[1]);function r(i){e[2](i)}let c={};return e[0]!==void 0&&(c.chatboxOpen=e[0]),s=new ee({props:c}),L.push(()=>It(s,"chatboxOpen",r)),{c(){tt(t.$$.fragment),n=x(),tt(s.$$.fragment)},m(i,u){G(t,i,u),$(i,n,u),G(s,i,u),l=!0},p(i,[u]){const d={};!o&&u&1&&(o=!0,d.chatboxOpen=i[0],Nt(()=>o=!1)),s.$set(d)},i(i){l||(T(t.$$.fragment,i),T(s.$$.fragment,i),l=!0)},o(i){z(t.$$.fragment,i),z(s.$$.fragment,i),l=!1},d(i){V(t,i),i&&y(n),V(s,i)}}}function se(e,t,n){let s=!1;const o=()=>{n(0,s=!s)};function l(r){s=r,n(0,s)}return[s,o,l]}class oe extends X{constructor(t){super(),Q(this,t,se,ne,F,{})}}new oe({target:document.getElementById("app")});
